---
layout: post
title: nginx命令及安装
---

# nginx 命令积累

写在最前面：千万不要在 windows 上搞nginx

实在没设备，整个虚拟机



## 常用命令
```shell
nginx -s quit     优雅停止nginx，有连接时会等连接请求完成再杀死worker进程  
nginx -s reload   优雅重启，并重新载入配置文件nginx.conf
nginx -s reopen   重新打开日志文件，一般用于切割日志
nginx -v      查看版本 
nginx -t       检查nginx的配置文件
nginx -h      查看帮助信息
nginx -V    详细版本信息，包括编译参数 
nginx  -c filename  指定配置文件
```


## 安装包安装

- 命令

```bash
sudo apt-get install nginx
```

- 更新源

```bash
sudo apt-get update
```

- 更新已安装的包

```bash
sudo apt-get upgrade
```

------

| 名称         | 目录                  |
| ------------ | --------------------- |
| 配置文件     | /etc/nginx/nginx.conf |
| 程序文件     | /usr/sbin/nginx       |
| 日志         | /varlog/nginx         |
| 默认虚拟主机 | /var/www/html         |

```bash
sudo /etc/init.d/nginx start
```

- 启动

```bash
sudo /etc/init.d/nginx stop
```

- 停止

```bash
sudo /etc/init.d/nginx restart
```

- 重启

```bash
sudo /etc/init.d/nginx status
```

- 状态

```css
lsof -i:80
```

- 查看端口占用

```swift
/usr/sbin/nginx -t -c /etc/nginx/nginx.conf
```

- 测试nginx.conf文件

  

## 源代码安装

```php
cd /usr/local  //进入local目录
wget http://nginx.org/download/nginx-1.2.8.tar.gz  // 指定版本在线安装
tar -zxvf nginx-1.2.8.tar.gz //解压缩
sudo apt-get install libpcre3 libpcre3-dev zlib1g-dev //安装依赖库
cd nginx-1.2.8
./configure
make
make install
```

| 名称         | 目录                             |
| ------------ | -------------------------------- |
| 配置文件     | /usr/local/nginx/conf/nginx.conf |
| 程序文件     | /usr/local/nginx/sbin/nginx      |
| 日志         | /var/log/nginx                   |
| 默认虚拟主机 | /var/www/                        |

启动

```bash
 /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
```

------

### conf配置文件示例

```php
server {
    listen      80;
    server_name localhost;
    index index.html index.htm index.php;
    root /var/www/html/statium;
    location / {
        root /var/www/html/statium;
        try_files $uri $uri/ /index.html last;
        index index.html;
    }
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root html;
    }
}
```

